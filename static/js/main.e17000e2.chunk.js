(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{40:function(e,t,a){"use strict";a.r(t),a.d(t,"converterFormats",function(){return u}),a.d(t,"converterName",function(){return p}),a.d(t,"converterExtension",function(){return d}),a.d(t,"convertTo",function(){return h}),a.d(t,"convertFrom",function(){return O}),a.d(t,"defaultValueForField",function(){return C}),a.d(t,"messageToProto",function(){return f});var n=a(8),r=a(15),s=r.List,o=r.Map,l=a(16),i=a(39),c={binary:["Binary","pbdata",b,y],"binary-hex":["Binary (hex)","pbdata.hex",function(e,t){var a=b(e,t);return Array.from(a).map(function(e){return(e<16?"0":"")+e.toString(16)}).join("").toUpperCase()},function(e,t){for(var a=[],n=0;n<t.length;n+=2)a.push(parseInt(t.substring(n,n+2),16));return y(e,new Uint8Array(a))}],"binary-b64":["Binary (base64)","pbdata.b64",function(e,t){var a=b(e,t);return l.util.base64.encode(a,0,a.length)},function(e,t){var a=window.atob(t);return y(e,a)}],json:["Json","json",function(e,t){var a=f(e,t);return JSON.stringify(a)},function(e,t){var a=JSON.parse(j(t));return E(e,a)}],"json-camel":["Json (camelCase)","cc.json",function(e,t){var a=f(e,t),n=m(e,e.toObject(a,l.util.toJSONOptions),function(e){return l.util.camelCase(e)});return JSON.stringify(n)},function(e,t){var a=JSON.parse(j(t)),n=k(e,a,function(e){return l.util.camelCase(e)});return E(e,n)}],"json-id":["Json (field-IDs)","ids.json",function(e,t){var a=f(e,t),n=m(e,e.toObject(a,l.util.toJSONOptions),function(e,t){return t.fields[e].id});return JSON.stringify(n)},function(e,t){var a=JSON.parse(j(t)),n=k(e,a,function(e,t){return t.fields[e].id});return E(e,n)}]},u=Object.keys(c).sort();function p(e){return c[e][0]}function d(e){return c[e][1]}function h(e,t,a){return c[e][2](t,a)}function b(e,t){var a=f(e,t);return e.encode(a).finish()}function m(e,t,a){return Object.fromEntries(Object.entries(t).map(function(t){var r=Object(n.a)(t,2),s=r[0],o=r[1],i=a(s,e),c=e.fields[s]||e.fields[i];return c.resolvedType&&c.resolvedType.constructor===l.Type?c.repeated?[i,o.map(function(e){return m(c.resolvedType,e,a)})]:[i,m(c.resolvedType,o,a)]:[i,o]}))}function f(e,t){var a=v(e,t);return e.fromObject(a)}function v(e,t){return t.mapEntries(function(t){var a=Object(n.a)(t,2),r=a[0],s=a[1],o=e.fieldsById[r];return[o.name,function(e,t){return e.repeated?t.map(function(t){return g(e,t.get("value"))}).toArray():1===t.size?g(e,t.get(0).get("value")):null}(o,s)]}).toObject()}function g(e,t){switch(e.type){case"string":case"bytes":case"int32":case"int64":case"sint32":case"sint64":case"uint32":case"uint64":case"fixed32":case"fixed64":case"float":case"double":case"bool":return t}var a=e.resolvedType;return null===a?(console.error("Unhandled value type",e),""):a.constructor===l.Enum?t:a.constructor===l.Type?v(a,t):(console.error("Unhandled value type",e),"")}function O(e,t,a){return c[e][3](t,a)}function y(e,t){var a=e.decode(t);return E(e,a,{binary:!0})}function j(e){return e instanceof Uint8Array?new TextDecoder("utf-8").decode(e):e}function k(e,t,a){return m(e,t,function(e,t){return function(e,t,a){for(var n in t.fields)if(a(n,t).toString()===e)return n;for(var r in console.error("Failed to match key"),t.fields)console.error("tried",a(r,t),"===",e);console.error("all false.")}(e,t,a)})}function E(e,t,a){return o(Object.entries(t).map(function(t){var r=Object(n.a)(t,2),c=r[0],u=r[1],p=e.fields[c];return[p.id,function(e,t,a){var n=e.repeated?t:[t];return s(n.map(function(t){return o({id:i.generate(),value:function(e,t,a){switch(e.type){case"bytes":var n=a&&a.binary;return n?l.util.base64.encode(t,0,t.length):t;case"string":case"int32":case"int64":case"sint32":case"sint64":case"uint32":case"uint64":case"fixed32":case"fixed64":case"float":case"double":case"bool":return t}var r=e.resolvedType;if(null===r)return console.error("Unhandled value type",e),"";if(r.constructor===l.Enum)return t;if(r.constructor===l.Type)return E(r,t,a);return console.error("Unhandled value type",e),""}(e,t,a)})}))}(p,u,a)]}))}function C(e){switch(e.type){case"string":case"bytes":return"";case"int32":case"int64":case"sint32":case"sint64":case"uint32":case"uint64":case"fixed32":case"fixed64":case"float":case"double":return"0";case"bool":return!1}var t=e.resolvedType;return null===t?(console.error("Unhandled default type, expected resolved type",e),""):t.constructor===l.Enum?parseInt(s(Object.keys(t.valuesById)).sort().first(),10):t.constructor===l.Type?o():(console.error("Unhandled default type",e),"")}},42:function(e,t,a){e.exports=a(75)},73:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(41),o=a.n(s),l=a(2),i=a(3),c=a(5),u=a(4),p=a(6),d=a(1),h=a(15).fromJS;var b={loadProtosFromStorage:function(){var e=h(JSON.parse(window.localStorage.getItem("stored_protos")||"{}"));return console.log("rawStoredProtos",e),e},saveProtosToStorage:function(e){e.isEmpty()?(console.log("REMOVING:",e.toJSON()),window.localStorage.removeItem("stored_protos")):(console.log("SAVING:",e.toJSON()),window.localStorage.setItem("stored_protos",JSON.stringify(e.toJSON())))}},m=a(8),f=a(16),v=a(39),g=a(40),O=a(15),y=O.List,j=O.Map,k=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return void 0===this.props.messageToBuild?null:r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,this.props.messageToBuild.name," builder"),r.a.createElement(C,{path:y(),fields:this.props.messageToBuild.fields,values:this.props.message,callbacks:this.props.callbacks}),r.a.createElement(E,{messageToBuild:this.props.messageToBuild,outputFormat:this.props.outputFormat,builtMessage:this.props.builtMessage,buildMessageUpToDate:this.props.buildMessageUpToDate,callbacks:this.props.callbacks}))}}]),t}(r.a.Component),E=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleExportToFile=function(){return a.props.callbacks.onBuild("save")},a.handleChangeOutputFormat=a.handleChangeOutputFormat.bind(Object(d.a)(Object(d.a)(a))),a.handleFileChange=a.handleFileChange.bind(Object(d.a)(Object(d.a)(a))),a.handleImportFromFile=a.handleImportFromFile.bind(Object(d.a)(Object(d.a)(a))),a.handleChangeBuiltMessage=a.handleChangeBuiltMessage.bind(Object(d.a)(Object(d.a)(a))),a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"handleChangeOutputFormat",value:function(e){this.props.callbacks.onSetOutputFormat(e.target.value)}},{key:"handleFileChange",value:function(e){var t=e.target.files[0],a=this,n=new FileReader;n.onload=function(){var e=new Uint8Array(n.result);a.props.callbacks.onImport(e)},n.onerror=function(e){console.log("FileLoading of",t,"failed:",e)},n.readAsArrayBuffer(t)}},{key:"handleImportFromFile",value:function(){this.refs.fileuploader.click()}},{key:"handleChangeBuiltMessage",value:function(e){var t="binary"===this.props.outputFormat?new Uint8Array(e.target.value.split(",")):e.target.value;this.props.callbacks.onImport(t)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,"Format:",r.a.createElement("select",{onChange:this.handleChangeOutputFormat,defaultValue:this.props.outputFormat},g.converterFormats.map(function(e){return r.a.createElement("option",{key:e,value:e},g.converterName(e))})),r.a.createElement("br",null),"import",r.a.createElement("button",{onClick:this.handleImportFromFile},"Load from file"),r.a.createElement("input",{type:"file",ref:"fileuploader",onChange:this.handleFileChange,hidden:!0}),r.a.createElement("br",null),"export",r.a.createElement("button",{onClick:this.handleExportToFile}," Save as file "),r.a.createElement("br",null),r.a.createElement("textarea",{value:null!==this.props.builtMessage[0]?this.props.builtMessage[0]:this.props.builtMessage[1],cols:"200",rows:"3",className:null===this.props.builtMessage[0]?"invalid":"",disabled:!this.props.buildMessageUpToDate,onChange:this.handleChangeBuiltMessage}))}}]),t}(r.a.Component),C=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("ol",null,Object.entries(this.props.fields).map(function(t){var a=Object(m.a)(t,2),n=a[0],s=a[1];return r.a.createElement("li",{key:n,value:s.id},r.a.createElement("b",null,s.type,s.repeated?"*":"",s.required?"!":"")," - ",s.name,r.a.createElement(S,{path:e.props.path.concat([s.id]),field:s,valueEntries:e.props.values.get(s.id)||y(),callbacks:e.props.callbacks}))}))}}]),t}(r.a.Component),S=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"handleSet",value:function(){this.props.callbacks.onAdd(this.props.path,j({id:v.generate(),value:g.defaultValueForField(this.props.field)}))}},{key:"handleDelete",value:function(e){this.props.callbacks.onDelete(this.props.path.concat([e]))}},{key:"handleDuplicate",value:function(e){this.props.callbacks.onAdd(this.props.path,e.set("id",v.generate()))}},{key:"handleMoveUp",value:function(e){this.props.callbacks.onMove(this.props.path,e,e-1)}},{key:"handleMoveDown",value:function(e){this.props.callbacks.onMove(this.props.path,e,e+1)}},{key:"render",value:function(){var e=this,t=0===this.props.valueEntries.size,a=this.props.field.repeated,n=this.props.field.repeated,s=this.props.field.repeated;return r.a.createElement("ul",null,this.props.valueEntries.map(function(t,a){var o=a!==e.props.valueEntries.size-1,l=0!==a;return r.a.createElement("li",{key:t.get("id")},r.a.createElement("button",{onClick:function(){return e.handleDelete(a)},className:"tiny"}," - "),r.a.createElement("button",{onClick:function(){return e.handleDuplicate(t)},hidden:!n,className:"tiny"},"*"),r.a.createElement("button",{onClick:function(){return e.handleMoveDown(a)},hidden:!s,disabled:!o,className:"tiny"},"v"),r.a.createElement("button",{onClick:function(){return e.handleMoveUp(a)},hidden:!s,disabled:!l,className:"tiny"},"^"),r.a.createElement(T,{path:e.props.path.concat([a,"value"]),field:e.props.field,value:t.get("value"),callbacks:e.props.callbacks}))}),(a||t)&&r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){return e.handleSet()}}," ",a?"add":"set"," ")))}}]),t}(r.a.Component),T=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){switch(this.props.field.type){case"string":return r.a.createElement(F,{path:this.props.path,field:this.props.field,value:this.props.value,callbacks:this.props.callbacks});case"bytes":return r.a.createElement(M,{path:this.props.path,field:this.props.field,value:this.props.value,callbacks:this.props.callbacks});case"int32":case"int64":case"sint32":case"sint64":case"uint32":case"uint64":case"fixed32":case"fixed64":return r.a.createElement(B,{path:this.props.path,field:this.props.field,value:this.props.value,callbacks:this.props.callbacks});case"float":case"double":return r.a.createElement(w,{path:this.props.path,field:this.props.field,value:this.props.value,callbacks:this.props.callbacks});case"bool":return r.a.createElement(I,{path:this.props.path,field:this.props.field,value:this.props.value,callbacks:this.props.callbacks})}var e=this.props.field.resolvedType;return e.constructor===f.Enum?r.a.createElement(P,{path:this.props.path,field:this.props.field,type:e,value:this.props.value,callbacks:this.props.callbacks}):e.constructor===f.Type?r.a.createElement(C,{path:this.props.path,fields:e.fields,values:this.props.value,callbacks:this.props.callbacks}):(console.log("Unhandled input type",this.props.field.type),r.a.createElement("div",null))}}]),t}(r.a.Component),F=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){this.props.callbacks.onSet(this.props.path,e.target.value)}},{key:"render",value:function(){var e=this;return r.a.createElement("textarea",{onChange:function(t){return e.handleChange(t)},value:this.props.value})}}]),t}(r.a.Component),M=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e){return a.handleChange(e)},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"isValid",value:function(){return f.util.base64.test(this.props.value)}},{key:"handleChange",value:function(e){this.props.callbacks.onSet(this.props.path,e.target.value)}},{key:"render",value:function(){var e=this.isValid();return r.a.createElement("textarea",{onChange:this.onChange,value:this.props.value,className:e?"":"invalid"})}}]),t}(r.a.Component),B=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onChange=a.handleChange.bind(Object(d.a)(Object(d.a)(a))),a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"isValid",value:function(){return/^[0-9]+$/.test(this.props.value)}},{key:"handleChange",value:function(e){this.props.callbacks.onSet(this.props.path,e.target.value)}},{key:"render",value:function(){var e=this.isValid();return r.a.createElement("input",{type:"text",onChange:this.onChange,value:this.props.value,className:e?"":"invalid"})}}]),t}(r.a.Component),w=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onChange=a.handleChange.bind(Object(d.a)(Object(d.a)(a))),a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"isValid",value:function(){return/^[0-9]+$|^[0-9]+[.][0-9]*$|^[0-9]*[.][0-9]+$/.test(this.props.value)}},{key:"handleChange",value:function(e){this.props.callbacks.onSet(this.props.path,e.target.value)}},{key:"render",value:function(){var e=this.isValid();return r.a.createElement("input",{type:"text",onChange:this.onChange,value:this.props.value,className:e?"":"invalid"})}}]),t}(r.a.Component),I=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){console.log("MessageBoolInput",this.props.path,e.target.checked),this.props.callbacks.onSet(this.props.path,e.target.checked)}},{key:"render",value:function(){var e=this;return r.a.createElement("input",{type:"checkbox",checked:this.props.value,onChange:function(t){return e.handleChange(t)}})}}]),t}(r.a.Component),P=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){var t=parseInt(e.target.value);console.log("MessageEnumInput.change",this.props.path,typeof t,t),this.props.callbacks.onSet(this.props.path,t)}},{key:"render",value:function(){var e=this,t=y(Object.keys(this.props.type.valuesById)).sort();return r.a.createElement("select",{defaultValue:this.props.value,onChange:function(t){return e.handleChange(t)}},t.map(function(t){return r.a.createElement("option",{value:t,key:t},e.props.type.valuesById[t]," = ",t)}).toJS())}}]),t}(r.a.Component),N=k,x=a(16),A=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,a=this.props.namespace.nested||{},n=Object.entries(a),s=n.filter(function(e){var t=Object(m.a)(e,2);t[0];return t[1].constructor===x.Namespace}),o=n.filter(function(e){var t=Object(m.a)(e,2);t[0];return t[1].constructor===x.Type});return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return e.props.callbacks.onRemoveProto(e.props.name)},hidden:!this.props.removable},"-"),this.props.name,r.a.createElement("button",{onClick:function(){return e.props.callbacks.onSelectMessageToBuild(e.props.namespace)},hidden:!this.props.buildable},"build"),r.a.createElement("ul",null,s.map(function(a){var n=Object(m.a)(a,2),s=n[0],o=n[1];return r.a.createElement("li",{key:s},r.a.createElement(t,{file:e.props.file,name:s,namespace:o,callbacks:e.props.callbacks}))}),o.map(function(t){var a=Object(m.a)(t,2),n=a[0],s=a[1];return r.a.createElement("li",{key:n},r.a.createElement(J,{file:e.props.file,message:s,callbacks:e.props.callbacks}))})))}}]),t}(r.a.Component),J=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(A,{file:this.props.file,name:this.props.message.name,namespace:this.props.message,buildable:!0,callbacks:this.props.callbacks})}}]),t}(r.a.Component),D=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(A,{file:this.props.name,name:this.props.name,namespace:this.props.contents.root,removable:!0,callbacks:this.props.callbacks})}}]),t}(r.a.Component),U=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Proto library"),r.a.createElement("ul",null,this.props.protoFiles.entrySeq().map(function(t){var a=Object(m.a)(t,2),n=a[0],s=a[1];return r.a.createElement("li",{key:n},r.a.createElement(D,{name:n,contents:s.get("contents"),callbacks:e.props.callbacks}))}).toJS()),r.a.createElement(V,{callbacks:this.props.callbacks}),r.a.createElement(R,{callbacks:this.props.callbacks}))}}]),t}(r.a.Component),V=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={isAdding:!1},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"handleStartAdding",value:function(){this.setState({isAdding:!0})}},{key:"handleSubmit",value:function(){var e=this.refs.fileName.value,t=this.refs.protoText.value;this.setState({isAdding:!1}),this.props.callbacks.onAddProto(e,t)}},{key:"render",value:function(){var e=this;return this.state.isAdding?r.a.createElement(r.a.Fragment,null,"File name: ",r.a.createElement("input",{type:"text",ref:"fileName"})," ",r.a.createElement("br",null),"ProtoContent: ",r.a.createElement("br",null),r.a.createElement("textarea",{ref:"protoText"})," ",r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return e.handleSubmit()}}," Submit ")):r.a.createElement("button",{onClick:function(){return e.handleStartAdding()}}," Add ")}}]),t}(r.a.Component),R=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"handleFileChange",value:function(e){var t=e.target.files[0],a=this,n=new FileReader;n.onload=function(){var e=n.result;a.props.callbacks.onAddProto(t.name,e)},n.onerror=function(e){console.log("FileLoading of",t,"failed:",e)},n.readAsText(t)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return e.refs.fileuploader.click()}},"From disk"),r.a.createElement("input",{type:"file",ref:"fileuploader",onChange:function(t){return e.handleFileChange(t)},hidden:!0}))}}]),t}(r.a.Component),L=U,$=a(40),z=a(16),_=a(72),q=a(15),G=q.List,W=q.Map;function H(e,t){z.parse.filename=t;var a=z.parse(e,{keepCase:!0});return a.root.resolveAll(),a}function K(e,t){return console.log("protobuf",z),e.updateIn(["contents"],function(e){return H(e,t)})}var Q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={rawStoredProtos:W(),storedProtos:W(),message:W(),outputFormat:"binary",builtMessage:["",null]},a.libraryCallbacks={onAddProto:a.handleAddProto.bind(Object(d.a)(Object(d.a)(a))),onRemoveProto:a.handleRemoveProto.bind(Object(d.a)(Object(d.a)(a))),onSelectMessageToBuild:a.handleSelectMessageToBuild.bind(Object(d.a)(Object(d.a)(a)))},a.messageBuilderCallbacks={onAdd:a.handleAddToMessage.bind(Object(d.a)(Object(d.a)(a))),onDelete:a.handleDeleteFromMessage.bind(Object(d.a)(Object(d.a)(a))),onSet:a.handleSetInMessage.bind(Object(d.a)(Object(d.a)(a))),onMove:a.handleMoveInMessage.bind(Object(d.a)(Object(d.a)(a))),onSetOutputFormat:a.handleSetOutputFormat.bind(Object(d.a)(Object(d.a)(a))),onBuild:a.handleBuildMessage.bind(Object(d.a)(Object(d.a)(a))),onImport:a.handleImportMessage.bind(Object(d.a)(Object(d.a)(a)))},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"handleAddProto",value:function(e,t){var a=H(t,e);this.setState(function(n){return{rawStoredProtos:n.rawStoredProtos.setIn([e],W({contents:t})),storedProtos:n.storedProtos.setIn([e],W({contents:a}))}})}},{key:"handleRemoveProto",value:function(e){this.setState(function(t){return{rawStoredProtos:t.rawStoredProtos.delete(e),storedProtos:t.storedProtos.delete(e)}})}},{key:"handleSelectMessageToBuild",value:function(e){this.setState({messageToBuild:e,message:W(),builtMessage:["",null],messageBuildTimer:null})}},{key:"handleSetOutputFormat",value:function(e){this.setState({outputFormat:e,builtMessage:[$.convertTo(e,this.state.messageToBuild,this.state.message),null],messageBuildTimer:null})}},{key:"handleBuildMessage",value:function(e){console.log("Will",e,"as",this.state.outputFormat);var t=$.convertTo(this.state.outputFormat,this.state.messageToBuild,this.state.message);if(console.log("handleBuildMessage",this.refs),"save"===e){var a=$.converterExtension(this.state.outputFormat),n=new Blob([t],{type:"application/octet-stream"});_.saveAs(n,this.state.messageToBuild.name+"."+a)}else console.log("Unhandled build kind:",e)}},{key:"handleImportMessage",value:function(e){console.log("Import",e.length,"bytes as",this.state.outputFormat);var t=$.convertFrom(this.state.outputFormat,this.state.messageToBuild,e);this.setState({message:t,builtMessage:[$.convertTo(this.state.outputFormat,this.state.messageToBuild,t),null],messageBuildTimer:null})}},{key:"handleAddToMessage",value:function(e,t){var a=this;this.setState(function(n){return{message:n.message.updateIn(e,function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:G()).push(t)}),messageBuildTimer:a.scheduleBuildMessage(n.messageBuildTimer)}})}},{key:"handleDeleteFromMessage",value:function(e){var t=this;this.setState(function(a){var n=e.pop(),r=n.last(),s=n.pop();return{message:a.message.deleteIn(e).updateIn(s,function(e){return e.get(r).isEmpty()?e.delete(r):e}),messageBuildTimer:t.scheduleBuildMessage(a.messageBuildTimer)}})}},{key:"handleSetInMessage",value:function(e,t){var a=this;this.setState(function(n){return{message:n.message.setIn(e,t),messageBuildTimer:a.scheduleBuildMessage(n.messageBuildTimer)}})}},{key:"handleMoveInMessage",value:function(e,t,a){var n=this;this.setState(function(r){return{message:r.message.updateIn(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G(),n=e.get(t);return e.delete(t).insert(a,n)}),messageBuildTimer:n.scheduleBuildMessage(r.messageBuildTimer)}})}},{key:"componentDidMount",value:function(){var e=b.loadProtosFromStorage(),t=e.map(K);console.log("storedProtos",t),this.setState({rawStoredProtos:e,storedProtos:t})}},{key:"componentDidUpdate",value:function(e,t){t.rawStoredProtos!==this.state.rawStoredProtos&&b.saveProtosToStorage(this.state.rawStoredProtos)}},{key:"scheduleBuildMessage",value:function(e){var t=this;return clearTimeout(e),setTimeout(function(){return t.setState(function(e){try{return{builtMessage:[$.convertTo(e.outputFormat,e.messageToBuild,e.message),null],messageBuildTimer:null}}catch(t){return{builtMessage:[null,t],messageBuildTimer:null}}})},500)}},{key:"fullMessageDescriptorName",value:function(e){if(!e)return"";for(var t=e.name;e.parent&&e.parent.name;)t=e.parent.name+"."+t,e=e.parent;return t=e.filename+":"+t}},{key:"render",value:function(){return r.a.createElement("div",{className:"protool"},r.a.createElement("div",{className:"message-builder"},r.a.createElement(N,{key:this.fullMessageDescriptorName(this.state.messageToBuild),messageToBuild:this.state.messageToBuild,message:this.state.message,outputFormat:this.state.outputFormat,builtMessage:this.state.builtMessage,buildMessageUpToDate:null===this.state.messageBuildTimer,callbacks:this.messageBuilderCallbacks})),r.a.createElement("div",{className:"proto-library"},r.a.createElement(L,{protoFiles:this.state.storedProtos,callbacks:this.libraryCallbacks})))}}]),t}(r.a.Component);a(73);o.a.render(r.a.createElement(Q,null),document.getElementById("root"))}},[[42,2,1]]]);
//# sourceMappingURL=main.e17000e2.chunk.js.map